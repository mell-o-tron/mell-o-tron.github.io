<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google-site-verification" content="tm5Y6ZNTf-lBqbwniGjQPv1q02o2TuUQZ9GTYa4SMLg" />
  <title>mell-o-tron</title>

  <meta name="description"
    content="" />
  <meta name="keywords" content="latex.css,css library,class-less css,latex css" />
  <meta property="og:title" content="mell-o-tron" />
  <meta property="og:type" content="website" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sugina-dev/latin-modern-web@1.0.1/style/latinmodern-roman.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sugina-dev/latin-modern-web@1.0.1/style/latinmodern-sans.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sugina-dev/latin-modern-web@1.0.1/style/latinmodern-mono.css" />
  
  <link rel="stylesheet" href="https://latex.now.sh/style.css">
  <link rel="stylesheet" href="https://latex.vercel.app/prism/prism.css"/>
  <link rel="stylesheet" href="/topmenu.css">
  
  <style>
    body {
      max-width: 45%;
      font-size: 19px;
      font-family: 'Latin Modern Sans';
    }
    a:link {
      color: #8ad0ff;
      font-weight: bold;
      background-color: transparent;
      text-decoration: none;
    }

    a:visited {
      color: #8ad0ff;
      font-style: italic;
      font-weight: bold;
      background-color: transparent;
      text-decoration: none;
    }

    a:hover {
      color: #a8dcff;
      font-weight: bold;
      background-color: transparent;
      text-decoration: underline;
    }

    a:active {
      color: #8ad0ff;
      font-weight: bold;
      background-color: transparent;
      text-decoration: underline;
    }
    
    @media (max-width: 1500px){
     body {
      max-width: 90%;
    }
    
    }
</style>
  
</head>


<body id="top" style = "background: #212121;color: white" onload="myFunction()">
  <nav class="top-menu" aria-label="Main navigation">
    <ul>
      <li><a href="/index.html" class="active">Home</a></li>
      <li><a href="/projects.html">Projects</a></li>
      <li><a href="/pub_sem_teaching.html">Seminars & Teaching</a></li>
      <li><a href="/misc.html">Misc</a></li>
    </ul>
  </nav>
  <header style = "background: #1a1a1a; border-radius: 25px;text-align: center;">
    <div style = "text-align: center;"><b style="font-size:250%"><span class="latex"><code>mell-o-tron</code></b><br>
    
    <canvas id="myCanvas" width="300" height="300" style="border:1px solid #d3d3d3;">
    
    </div>
<b>Lorenzo Pace</b>, PhD student @ <a href="https://www.mpi-inf.mpg.de/">Max Planck Institute for Informatics</a>.
        <br><br>
    
    <script>


    function myFunction() {
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      intervalID = setInterval(drawOrbit, 5, ctx);
      intervalID = setInterval(clear, 15000, ctx);
    }

    function vec_sum(a, b){
      return [a[0] + b[0], a[1] + b[1]];
    }

    function vec_sub(a, b){
      return [a[0] - b[0], a[1] - b[1]];
    }

    function vec_mul (k, a){
      return [a[0] * k, a[1] * k]
    }

    function dist(a, b){
      return Math.sqrt((a[0] - b[0])**2 + (a[1] - b[1])**2);
    }

    function direction(a, b){
      let dir = [b[0] - a[0], b[1] - a[1]]
      let norm = dist (dir, [0,0])
      return vec_mul(1/norm, dir);
    }

    function dot (a, b){
      return a[0] * b[0] + a[1] * b[1];
    }

    function angle_between_vecs(a, b){
      return Math.acos(dot(a, b) / (dist(a, [0,0]) * dist(b, [0,0])));
    }

    function perp (a){
      return [-a[1], a[0]]
    }

    function rotate_vec(a, rad){
      a1 = [0,0]
      a1[0] = a[0] * Math.cos(rad) - a[1] * Math.sin(rad);
      a1[1] = a[0] * Math.sin(rad) + a[1] * Math.cos(rad);

      return a1;
    }

    var prev_posx = null;
    var prev_posy = null;

    var posx = null;
    var posy = null;

    var velx_dt = null;
    var vely_dt = null;

    var rgb = [204, 255, 204]
    
    var G = 20

    var centers = [];

    var eta = 1

    function drawOrbit(ctx) {

      ctx.beginPath();
      ctx.lineWidth = "2";
      ctx.strokeStyle = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;
      ctx.fillStyle =  `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;
      rgb[0] += 10 * (Math.random() - .5);
      rgb[1] += 10 * (Math.random() - .5);
      rgb[2] += 10 * (Math.random() - .5);
      
      if(posx == null || dist([posx, posy], [150, 150]) > 300){
        clear(ctx);
        posx = (Math.random() * 300);
        posy = (Math.random() * 300);
        velx_dt = (Math.random() - .5) * eta;
        vely_dt = (Math.random() - .5) * eta;
      }
      else{
        posx +=  velx_dt;
        posy +=  vely_dt;

        var grav_acc = 0;
        for (p of centers){
          let p_distance = dist([posx, posy], p);

          if (p_distance <= 10){

            let tangent = perp (direction([posx, posy], p));

            alpha = angle_between_vecs([velx_dt, vely_dt], tangent);

            console.log(alpha);

            new_vel = rotate_vec(tangent, alpha);

            norm_new_vel = dist([0,0], new_vel);
            norm_old_vel = dist([0,0], [velx_dt, vely_dt]);

            new_vel = vec_mul(norm_old_vel/norm_new_vel, new_vel)

            velx_dt = new_vel[0];
            vely_dt = new_vel[1];
          }

          if (p_distance <= 5){
            clear(ctx);
          }

          grav_acc += G / (p_distance**2);

          let dir = direction([posx, posy], p);

          acc = vec_mul(grav_acc, dir);

          velx_dt += acc[0];    //compensate for dt with G
          vely_dt += acc[1];
        }
      }
      ctx.moveTo(posx, posy);

                         
      ctx.fillRect(posx,posy,5,5);


      ctx.stroke(); 
    }
    
    function clear (ctx) {
      ctx.clearRect(0, 0, 300, 300);
      posx = null;
      posy = null;

      centers = []

      for (i in [0,1,2])
        centers.push([Math.random() * 150 + 150/2, Math.random() * 150 + 150/2])


      for (p of centers){
        ctx.beginPath();
        ctx.strokeStyle = `rgb(200,200,200)`;
        ctx.lineWidth = "1";
        ctx.arc(p[0], p[1], 10, 0, 2 * Math.PI);
        ctx.stroke();
      }

    }
</script>
    
  </header>


  <main>
    <article>
        
     </article>
  </main>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'],],
      },
    }
    const toggle = document.getElementById('typeface-toggle')
    const typeface = document.getElementById('typeface')
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('libertinus')
      typeface.textContent = document.body.classList.contains('libertinus') ? 'Libertinus' : 'Latin Modern'
    })
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>

  <script async defer data-domain="latex.now.sh" src="https://plausible.io/js/plausible.js"></script>
</body>
<br><br>
<div style="font-size:80%">
Credit to <b>Vincent DÃ¶rig</b> for their brilliant template; I'm not giving this justice, you'll find the full thing here:  <a title=""
                href="https://github.com/vincentdoerig/latex-css"> <code>https://github.com/vincentdoerig/latex-css</code></a>
</div>
</html>

